# AdvCommands
AdvCommandsは、従来のマインクラフトコマンドに複数の機能を追加するプラグインのプロジェクトです。
## これが必要な理由
今までのマインクラフトコマンドで作れるものはたくさんあります。
その殆どは、`execute`という条件分岐ができるコマンドとコマンドブロックのリピートを組み合わせて多用しています。

しかし、`execute`少し分かりづらく、リピートしていることで考えることが増えるほか、パフォーマンスも低下してしまいます。

このプラグインはこれらをわかりやすいものに置き換えることをします。
## 始めてみましょう
このプラグインをspigot系のサーバーで導入して、起動します。

起動したらコマンド`/runcmd say Hello world`を実行してみてください。
そうしたら、`Hello world`が出力されます。いや、されることを祈っています。
## 追加される機能
- 変数※
- 関数
- 繰り返し
- イベントハンドラ
- ランダムUUID※
※関数内使用可能

順を追って説明します。
### 変数
変数を使えば、具体的な値を抽象的な名前にし、わかりやすくコードを書くことができます。
`setVar 変数名 値`で変数を宣言します。
`<変数名>`または`;変数名;`で値を埋め込みます。
`;変数名;`のほうが早く埋め込まれます。
※setVarは関数以外（チャットコマンド）で使えますが、変数の埋め込みはできません。
```
setVar baka aho
cmd say <baka>
これでahoと表示されます。
```
### 関数
※数学の関数とは違います

関数というのは、何らかの処理をひとまとまりにしたものです。
この関数があることによって同じ処理を何回も書いたりすることがないのでプログラムのサイズも少なくなり、可読性が上がります。

このプラグインでは、コマンドブロックを+y軸方向につなげることで複数の処理を一つの関数としてまとめることができます。
座標`10 10 10`が1行目としたら、`10 12 10`が3行目です。

コマンドブロックにリピートやチェーンをつけないでください。

関数のあとに引数をつけることもできます。（戻り値はつけれません）

```
座標`20 30 10`が1行目とした関数hogeの宣言
/declFunc hoge 20 30 10

関数hogeの実行
/runFunc hoge

関数内で関数を呼び出す場合はrunFuncはいりません。
hoge
だけです。

関数hogeの引数にhelloを入れる
hoge hello

関数hoge内
cmd say <args.1>
```
### 繰り返し
ある処理を特定の回数で繰り替えします。

これは`scoreboard`と`execute`などを使えばできますが、このプラグインではもっと簡略化します。

```
10回関数hogeを実行する
for 10 hoge
```
### イベントハンドラ
プラグインでは何らかのイベント（移動やブロック設置など）が発生すると特定の関数を実行できます。
これによって毎tickで確認する従来のコマンドではなく、何かが起きたら実行してもらうという方式だと可読性が上がります。

イベントハンドラにはイベントに関する変数が含まれます
詳しくはEventVariables.mdを参照してください。

```
キルイベントでhogeという関数を実行するスケジュールを登録
addEvent onKill hoge

例:移動したプレイヤーにmove!と送る
チャットコマンド
/addEvent onMove fuga
関数fuga内
cmd tell {player.name} move!
```
### ランダムUUID
`#randuuid#`とすることによってそこがランダムなUUID(ハイフン無し)に置き換わります。
たとえば、このプラグインには関数の戻り地がありません。
そこでランダムUUIDを使用して、結果を保存する変数名を予定することができます。
```
関数hoge内
setVar returnId #randuuid#
piyo <returnId>
関数piyo内
setVarG return<args.0> hello
関数hoge内
cmd say <return;returnId;>
これでhelloと表示されます。
```
